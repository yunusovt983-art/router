#!/bin/bash

# =============================================================================
# Task 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
# –õ–æ–≥ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥, –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö AI –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
# =============================================================================

echo "üìã –í—Å–µ –∫–æ–º–∞–Ω–¥—ã, –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–ª—è Task 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞"
echo "=================================================================="

# =============================================================================
# –≠–¢–ê–ü 1: –ü–†–û–í–ï–†–ö–ê –ö–û–ú–ü–ò–õ–Ø–¶–ò–ò WORKSPACE
# =============================================================================

echo ""
echo "üîß –≠–¢–ê–ü 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ Rust workspace"
echo "----------------------------------------------"

# –ö–æ–º–∞–Ω–¥–∞: cargo check
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–º–ø–∏–ª—è—Ü–∏—é –≤—Å–µ–≥–æ workspace –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –æ—à–∏–±–∫–∞ - –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç main.rs —Ñ–∞–π–ª—ã –≤ –ø–æ–¥–≥—Ä–∞—Ñ–∞—Ö
echo "cargo check  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ workspace (–ø–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞ - –Ω–µ—É–¥–∞—á–Ω–∞—è)"

# =============================================================================
# –≠–¢–ê–ü 2: –£–°–¢–ê–ù–û–í–ö–ê DOCKER
# =============================================================================

echo ""
echo "üê≥ –≠–¢–ê–ü 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –Ω–∞ Ubuntu 25.04"
echo "--------------------------------------------"

# –ö–æ–º–∞–Ω–¥–∞: which docker
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ Docker –≤ —Å–∏—Å—Ç–µ–º–µ
# –†–µ–∑—É–ª—å—Ç–∞—Ç: Docker –Ω–µ –Ω–∞–π–¥–µ–Ω (exit code 1)
echo "which docker  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è Docker –≤ —Å–∏—Å—Ç–µ–º–µ"

# –ö–æ–º–∞–Ω–¥–∞: cat /etc/os-release
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤–µ—Ä—Å–∏—é –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
# –†–µ–∑—É–ª—å—Ç–∞—Ç: Ubuntu 25.04 (Plucky Puffin)
echo "cat /etc/os-release  # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –û–°"

# –ö–æ–º–∞–Ω–¥–∞: sudo apt update
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –£—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –ø–∞–∫–µ—Ç–æ–≤
echo "sudo apt update  # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–∞–∫–µ—Ç–æ–≤"

# –ö–æ–º–∞–Ω–¥–∞: sudo apt install -y apt-transport-https ca-certificates curl gnupg lsb-release
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è Docker —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–∞–∫–µ—Ç—ã —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏–ª–∏ —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
echo "sudo apt install -y apt-transport-https ca-certificates curl gnupg lsb-release  # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π"

# –ö–æ–º–∞–Ω–¥–∞: curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –î–æ–±–∞–≤–∏—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π GPG –∫–ª—é—á Docker –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ –ø–∞–∫–µ—Ç–æ–≤
# –†–µ–∑—É–ª—å—Ç–∞—Ç: GPG –∫–ª—é—á —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω
echo "curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg  # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ GPG –∫–ª—é—á–∞ Docker"

# –ö–æ–º–∞–Ω–¥–∞: echo "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –î–æ–±–∞–≤–∏—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Docker –≤ —Å–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –ø–∞–∫–µ—Ç–æ–≤
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω
echo "echo \"deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \$(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null  # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Docker —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è"

# –ö–æ–º–∞–Ω–¥–∞: sudo apt update
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤ —Å —É—á–µ—Ç–æ–º –Ω–æ–≤–æ–≥–æ Docker —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –£—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω—ã –ø–∞–∫–µ—Ç—ã –∏–∑ Docker —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
echo "sudo apt update  # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –Ω–æ–≤—ã–º Docker —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º"

# –ö–æ–º–∞–Ω–¥–∞: sudo apt install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker CE, CLI, containerd –∏ Docker Compose plugin
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –£—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Docker (103 MB –∑–∞–≥—Ä—É–∂–µ–Ω–æ)
echo "sudo apt install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin  # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker"

# –ö–æ–º–∞–Ω–¥–∞: sudo systemctl start docker
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–ª—É–∂–±—É Docker
# –†–µ–∑—É–ª—å—Ç–∞—Ç: Docker —Å–ª—É–∂–±–∞ –∑–∞–ø—É—â–µ–Ω–∞
echo "sudo systemctl start docker  # –ó–∞–ø—É—Å–∫ —Å–ª—É–∂–±—ã Docker"

# –ö–æ–º–∞–Ω–¥–∞: sudo systemctl enable docker
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ Docker –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã
# –†–µ–∑—É–ª—å—Ç–∞—Ç: Docker –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
echo "sudo systemctl enable docker  # –í–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ Docker"

# –ö–æ–º–∞–Ω–¥–∞: sudo usermod -aG docker $USER
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker –¥–ª—è —Ä–∞–±–æ—Ç—ã –±–µ–∑ sudo
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—É (—Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Å—Å–∏–∏)
echo "sudo usermod -aG docker \$USER  # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker"

# –ö–æ–º–∞–Ω–¥–∞: docker --version
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ Docker
# –†–µ–∑—É–ª—å—Ç–∞—Ç: Docker version 28.3.3, build 980b856
echo "docker --version  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ Docker"

# –ö–æ–º–∞–Ω–¥–∞: docker compose version
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é Docker Compose plugin
# –†–µ–∑—É–ª—å—Ç–∞—Ç: Docker Compose version v2.39.1
echo "docker compose version  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ Docker Compose"

# –ö–æ–º–∞–Ω–¥–∞: sudo docker run hello-world
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ Docker –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω hello-world –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
echo "sudo docker run hello-world  # –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ Docker"

# =============================================================================
# –≠–¢–ê–ü 3: –ù–ê–°–¢–†–û–ô–ö–ê –°–ö–†–ò–ü–¢–û–í –ò –ó–ê–ü–£–°–ö –ò–ù–§–†–ê–°–¢–†–£–ö–¢–£–†–´
# =============================================================================

echo ""
echo "‚öôÔ∏è –≠–¢–ê–ü 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤ –∏ –∑–∞–ø—É—Å–∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã"
echo "-----------------------------------------------------"

# –ö–æ–º–∞–Ω–¥–∞: chmod +x scripts/setup-dev.sh
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
echo "chmod +x scripts/setup-dev.sh  # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞"

# –ö–æ–º–∞–Ω–¥–∞: ./scripts/setup-dev.sh (–ø–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞)
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ä–µ–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –û—à–∏–±–∫–∞ - —Å–∫—Ä–∏–ø—Ç –Ω–µ –Ω–∞—à–µ–ª docker-compose –∫–æ–º–∞–Ω–¥—É
echo "./scripts/setup-dev.sh  # –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ (–Ω–µ—É–¥–∞—á–Ω—ã–π - –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É docker-compose)"

# –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ docker compose plugin:
# –ö–æ–º–∞–Ω–¥–∞: ./scripts/setup-dev.sh (–≤—Ç–æ—Ä–∞—è –ø–æ–ø—ã—Ç–∫–∞)
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –£—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞, .env —Ñ–∞–π–ª, –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏—è
echo "./scripts/setup-dev.sh  # –í—Ç–æ—Ä–æ–π –∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ (—É—Å–ø–µ—à–Ω—ã–π)"

# –ö–æ–º–∞–Ω–¥–∞: make start-infra (—Å sudo)
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã —á–µ—Ä–µ–∑ Docker Compose
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –£—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω—ã –≤—Å–µ 9 —Å–µ—Ä–≤–∏—Å–æ–≤ (PostgreSQL x4, Elasticsearch, Redis, Jaeger, Prometheus, Grafana)
echo "sudo make start-infra  # –ó–∞–ø—É—Å–∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤"

# –ö–æ–º–∞–Ω–¥–∞: sudo docker compose ps
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –í—Å–µ 9 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
echo "sudo docker compose ps  # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤"

# =============================================================================
# –≠–¢–ê–ü 4: –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–û–°–ü–û–°–û–ë–ù–û–°–¢–ò –°–ï–†–í–ò–°–û–í
# =============================================================================

echo ""
echo "üîç –≠–¢–ê–ü 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤"
echo "----------------------------------------------"

# –ö–æ–º–∞–Ω–¥–∞: sudo docker compose logs elasticsearch | tail -10
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Elasticsearch –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
# –†–µ–∑—É–ª—å—Ç–∞—Ç: Elasticsearch –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
echo "sudo docker compose logs elasticsearch | tail -10  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ Elasticsearch"

# –ö–æ–º–∞–Ω–¥–∞: sudo docker compose exec elasticsearch curl -s http://localhost:9200/_cluster/health
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ –∫–ª–∞—Å—Ç–µ—Ä–∞ Elasticsearch –∏–∑–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –ö–ª–∞—Å—Ç–µ—Ä –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ "green" - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–µ–Ω
echo "sudo docker compose exec elasticsearch curl -s http://localhost:9200/_cluster/health  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è Elasticsearch"

# –ö–æ–º–∞–Ω–¥–∞: ss -tlnp | grep :9200
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ—Ä—Ç 9200 –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —Ö–æ—Å—Ç–µ
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ—Ä—Ç –æ—Ç–∫—Ä—ã—Ç –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
echo "ss -tlnp | grep :9200  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤"

# –ö–æ–º–∞–Ω–¥–∞: chmod +x scripts/health-check.sh
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü—Ä–∞–≤–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
echo "chmod +x scripts/health-check.sh  # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤ –Ω–∞ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è"

# –ö–æ–º–∞–Ω–¥–∞: ./scripts/health-check.sh
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –í—Å–µ 9 —Å–µ—Ä–≤–∏—Å–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ –¥–æ—Å—Ç—É–ø–Ω—ã
echo "./scripts/health-check.sh  # –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤"

# –ö–æ–º–∞–Ω–¥–∞: make health-check
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∑–¥–æ—Ä–æ–≤—å—è —á–µ—Ä–µ–∑ Makefile
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
echo "make health-check  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —á–µ—Ä–µ–∑ Makefile"

# =============================================================================
# –≠–¢–ê–ü 5: –§–ò–ù–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –ö–û–ú–ü–ò–õ–Ø–¶–ò–ò
# =============================================================================

echo ""
echo "‚úÖ –≠–¢–ê–ü 5: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏"
echo "----------------------------------------"

# –ö–æ–º–∞–Ω–¥–∞: cargo check (—Ñ–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤–µ—Å—å workspace –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –£—Å–ø–µ—à–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è –≤—Å–µ—Ö 5 –ø–æ–¥–≥—Ä–∞—Ñ–æ–≤
echo "cargo check  # –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ workspace (—É—Å–ø–µ—à–Ω–∞—è)"

# =============================================================================
# –ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê
# =============================================================================

echo ""
echo "üìä –ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê Task 1"
echo "============================="
echo "‚úÖ –°–æ–∑–¥–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: ~30+ (Cargo.toml, Dockerfile, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, —Å–∫—Ä–∏–ø—Ç—ã)"
echo "‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Docker: –≤–µ—Ä—Å–∏—è 28.3.3 —Å Compose plugin v2.39.1"
echo "‚úÖ –ó–∞–ø—É—â–µ–Ω–æ —Å–µ—Ä–≤–∏—Å–æ–≤: 9 (PostgreSQL x4, Elasticsearch, Redis, Jaeger, Prometheus, Grafana)"
echo "‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø–æ—Ä—Ç–æ–≤: 10+ (4000, 4001-4005, 5432-5435, 6379, 9200, 9091, 3000, 16686, 14268)"
echo "‚úÖ Workspace –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è: 5 –ø–æ–¥–≥—Ä–∞—Ñ–æ–≤ –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ"
echo "‚úÖ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞: –ø–æ–ª–Ω–∞—è —Å—Ä–µ–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è GraphQL —Ñ–µ–¥–µ—Ä–∞—Ü–∏–∏"

echo ""
echo "üéØ –†–ï–ó–£–õ–¨–¢–ê–¢: Task 1 –≤—ã–ø–æ–ª–Ω–µ–Ω –Ω–∞ 100%"
echo "–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Auto.ru GraphQL Federation –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!"

# =============================================================================
# –ü–û–õ–ï–ó–ù–´–ï –ö–û–ú–ê–ù–î–´ –î–õ–Ø –î–ê–õ–¨–ù–ï–ô–®–ï–ô –†–ê–ë–û–¢–´
# =============================================================================

echo ""
echo "üöÄ –ü–û–õ–ï–ó–ù–´–ï –ö–û–ú–ê–ù–î–´ –î–õ–Ø –î–ê–õ–¨–ù–ï–ô–®–ï–ô –†–ê–ë–û–¢–´:"
echo "=========================================="
echo "make health-check     # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤"
echo "make start-infra      # –ó–∞–ø—É—Å–∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã"
echo "make stop             # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤"
echo "make logs-ugc         # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ UGC –ø–æ–¥–≥—Ä–∞—Ñ–∞"
echo "make dev-ugc          # –ó–∞–ø—É—Å–∫ UGC –ø–æ–¥–≥—Ä–∞—Ñ–∞ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏"
echo "cargo build           # –°–±–æ—Ä–∫–∞ –≤—Å–µ—Ö –ø–æ–¥–≥—Ä–∞—Ñ–æ–≤"
echo "cargo test            # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤"
echo ""
echo "üåê –î–û–°–¢–£–ü–ù–´–ï URL:"
echo "http://localhost:4000  # Apollo Router (–∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω)"
echo "http://localhost:3000  # Grafana (admin/admin)"
echo "http://localhost:16686 # Jaeger UI"
echo "http://localhost:9091  # Prometheus"
echo "http://localhost:9200  # Elasticsearch"