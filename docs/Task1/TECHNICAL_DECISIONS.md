# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è Task 1: –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã

## –û–±–∑–æ—Ä –ø—Ä–∏–Ω—è—Ç—ã—Ö —Ä–µ—à–µ–Ω–∏–π

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–ª—é—á–µ–≤—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è, –ø—Ä–∏–Ω—è—Ç—ã–µ –≤ Task 1, –∏—Ö –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã.

## 1. –í—ã–±–æ—Ä —è–∑—ã–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è: Rust

### –ü—Ä–∏–Ω—è—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ: Rust
**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**:
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: Zero-cost abstractions, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ GC
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–∞–º—è—Ç–∏**: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ segfaults –∏ data races
- **–≠–∫–æ—Å–∏—Å—Ç–µ–º–∞ GraphQL**: –ó—Ä–µ–ª—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (async-graphql, juniper)
- **Concurrency**: –û—Ç–ª–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ async/await
- **Apollo Federation**: –•–æ—Ä–æ—à–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Apollo Router

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –∏ –∏—Ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:

| –Ø–∑—ã–∫ | –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ | –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ |
|------|-------------|------------|
| **Node.js** | –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, –±–æ–ª—å—à–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ GraphQL | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, single-threaded |
| **Go** | –ü—Ä–æ—Å—Ç–æ—Ç–∞, —Ö–æ—Ä–æ—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –ú–µ–Ω–µ–µ –∑—Ä–µ–ª–∞—è GraphQL —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ |
| **Java/Kotlin** | –ó—Ä–µ–ª–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞, Spring GraphQL | –ë–æ–ª—å—à–∏–π memory footprint |
| **C#** | –û—Ç–ª–∏—á–Ω–∞—è GraphQL –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (HotChocolate) | –ü—Ä–∏–≤—è–∑–∫–∞ –∫ Microsoft —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ |

### –ú–µ—Ç—Ä–∏–∫–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:
```
–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:    Rust > Go > Java > Node.js
–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:         Rust > Java > Go > Node.js  
–°–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:  Node.js > Java > Go > Rust
GraphQL —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞:   Node.js > Java > Rust > Go
```

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞: Cargo Workspace

### –ü—Ä–∏–Ω—è—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ: Monorepo —Å Cargo Workspace

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**:
```toml
[workspace]
members = [
    "crates/apollo-router",
    "crates/ugc-subgraph", 
    "crates/users-subgraph",
    "crates/offers-subgraph",
    "crates/shared"
]
resolver = "2"
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- **–ï–¥–∏–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏**: –í—Å–µ crate'—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏
- **–ê—Ç–æ–º–∞—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ shared –≤–ª–∏—è—é—Ç –Ω–∞ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Å—Ä–∞–∑—É
- **–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞**: `cargo build --workspace`
- **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞**: Shared –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–º

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã**:

#### Polyrepo (–æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)
```
auto-ru-apollo-router/
auto-ru-ugc-subgraph/
auto-ru-users-subgraph/
auto-ru-offers-subgraph/
auto-ru-shared-lib/
```

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ polyrepo**:
- –°–ª–æ–∂–Ω–æ—Å—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤–µ—Ä—Å–∏–π shared –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤ package registry (crates.io –∏–ª–∏ private)
- –£—Å–ª–æ–∂–Ω–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ cross-cutting –∏–∑–º–µ–Ω–µ–Ω–∏–π

#### Git Submodules
```
auto-ru-federation/
‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îú‚îÄ‚îÄ apollo-router/     (git submodule)
‚îÇ   ‚îú‚îÄ‚îÄ ugc-subgraph/      (git submodule)
‚îÇ   ‚îî‚îÄ‚îÄ shared/            (git submodule)
```

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ submodules**:
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –ü—Ä–æ–±–ª–µ–º—ã —Å CI/CD –ø–∞–π–ø–ª–∞–π–Ω–∞–º–∏
- –ß–∞—Å—Ç—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ —Å–ª–∏—è–Ω–∏–∏

## 3. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è: Docker + Docker Compose

### –ü—Ä–∏–Ω—è—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ: Multi-stage Docker builds + Docker Compose

**Multi-stage Dockerfile**:
```dockerfile
# Builder stage
FROM rust:1.75 as builder
WORKDIR /app
COPY . .
RUN cargo build --release --bin apollo-router

# Runtime stage  
FROM debian:bookworm-slim
RUN apt-get update && apt-get install -y ca-certificates && rm -rf /var/lib/apt/lists/*
COPY --from=builder /app/target/release/apollo-router /usr/local/bin/apollo-router
EXPOSE 4000
CMD ["apollo-router"]
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- **–†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞**: ~50MB vs ~2GB (single-stage)
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å –∞—Ç–∞–∫–∏
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã**:

#### Single-stage build
```dockerfile
FROM rust:1.75
WORKDIR /app
COPY . .
RUN cargo build --release
CMD ["./target/release/apollo-router"]
```

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- –†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞: ~2GB (–≤–∫–ª—é—á–∞–µ—Ç Rust toolchain)
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –ë–æ–ª—å—à–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –ú–µ–¥–ª–µ–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

#### Distroless images
```dockerfile
FROM gcr.io/distroless/cc-debian12
COPY --from=builder /app/target/release/apollo-router /apollo-router
ENTRYPOINT ["/apollo-router"]
```

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º**:
- **–†–∞–∑–º–µ—Ä**: Distroless ~20MB vs Debian slim ~50MB
- **–û—Ç–ª–∞–¥–∫–∞**: Debian slim –ø—Ä–æ—â–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ (–µ—Å—Ç—å shell)
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: Debian slim –ª—É—á—à–µ –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫ —Å C –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

## 4. –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è: Docker Compose vs Kubernetes

### –ü—Ä–∏–Ω—è—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ: Docker Compose –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**docker-compose.yml —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```yaml
version: '3.8'
services:
  postgres:
    image: postgres:15
    environment:
      POSTGRES_DB: auto_ru_federation
    volumes:
      - postgres_data:/var/lib/postgresql/data
    
  redis:
    image: redis:7-alpine
    
  apollo-router:
    build:
      context: .
      dockerfile: crates/apollo-router/Dockerfile
    depends_on:
      - postgres
      - redis
      - ugc-subgraph
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**:
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –û–¥–∏–Ω —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç**: `docker-compose up -d`
- **–ò–∑–æ–ª—è—Ü–∏—è**: –ö–∞–∂–¥—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –∏–º–µ–µ—Ç —Å–≤–æ—é —Å—Ä–µ–¥—É
- **–û—Ç–ª–∞–¥–∫–∞**: –õ–µ–≥–∫–∏–π –¥–æ—Å—Ç—É–ø –∫ –ª–æ–≥–∞–º –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º

**Kubernetes –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞**:
```yaml
# –ë—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–¥–∞—á–∞—Ö
apiVersion: apps/v1
kind: Deployment
metadata:
  name: apollo-router
spec:
  replicas: 3
  selector:
    matchLabels:
      app: apollo-router
  template:
    spec:
      containers:
      - name: apollo-router
        image: auto-ru/apollo-router:latest
        resources:
          limits:
            memory: "512Mi"
            cpu: "500m"
```

## 5. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: PostgreSQL

### –ü—Ä–∏–Ω—è—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ: PostgreSQL 15

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**:
- **ACID compliance**: –ì–∞—Ä–∞–Ω—Ç–∏–∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
- **JSON –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: –ì–∏–±–∫–æ—Å—Ç—å –¥–ª—è GraphQL —Å—Ö–µ–º
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –û—Ç–ª–∏—á–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è OLTP
- **–≠–∫–æ—Å–∏—Å—Ç–µ–º–∞**: –ë–æ–≥–∞—Ç–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π
- **Rust –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –û—Ç–ª–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ sqlx

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**:
```yaml
postgres:
  image: postgres:15
  environment:
    POSTGRES_DB: auto_ru_federation
    POSTGRES_USER: postgres
    POSTGRES_PASSWORD: password
  volumes:
    - postgres_data:/var/lib/postgresql/data
    - ./migrations:/docker-entrypoint-initdb.d
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã**:

#### MongoDB
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –ì–∏–±–∫–∞—è —Å—Ö–µ–º–∞, —Ö–æ—Ä–æ—à–∞—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ ACID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –º–µ–∂–¥—É –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏, —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Å GraphQL relations

#### CockroachDB  
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, PostgreSQL —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**: –°–ª–æ–∂–Ω–æ—Å—Ç—å –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –¥–æ—Ä–æ–≥–æ–≤–∏–∑–Ω–∞

#### SQLite
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –ü—Ä–æ—Å—Ç–æ—Ç–∞, –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ concurrency, –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

## 6. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ: Redis

### –ü—Ä–∏–Ω—è—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ: Redis 7

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**:
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: In-memory —Ö—Ä–∞–Ω–µ–Ω–∏–µ
- **–°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö**: –ë–æ–≥–∞—Ç—ã–π –Ω–∞–±–æ—Ä —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- **Persistence**: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
- **Pub/Sub**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **Rust –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –û—Ç–ª–∏—á–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã (redis-rs)

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**:
```yaml
redis:
  image: redis:7-alpine
  command: redis-server --maxmemory 256mb --maxmemory-policy allkeys-lru
  ports:
    - "6379:6379"
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã**:

#### Memcached
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –ü—Ä–æ—Å—Ç–æ—Ç–∞, –Ω–µ–º–Ω–æ–≥–æ –ª—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö, –Ω–µ—Ç persistence

#### In-memory –∫–µ—à (–Ω–∞–ø—Ä–∏–º–µ—Ä, moka)
```rust
use moka::future::Cache;

let cache: Cache<String, String> = Cache::builder()
    .max_capacity(10_000)
    .time_to_live(Duration::from_secs(30 * 60))
    .build();
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –ù–µ—Ç —Å–µ—Ç–µ–≤—ã—Ö –≤—ã–∑–æ–≤–æ–≤, –ø—Ä–æ—Å—Ç–æ—Ç–∞
**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**: –ù–µ —Ä–∞–∑–¥–µ–ª—è–µ—Ç—Å—è –º–µ–∂–¥—É –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏, —Ç–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ

## 7. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: Prometheus + Jaeger

### –ü—Ä–∏–Ω—è—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ: Prometheus –¥–ª—è –º–µ—Ç—Ä–∏–∫, Jaeger –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏

**Prometheus –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**:
```yaml
telemetry:
  metrics:
    prometheus:
      enabled: true
      listen: 0.0.0.0:9090
      path: /metrics
```

**Jaeger –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**:
```yaml
telemetry:
  tracing:
    jaeger:
      enabled: true
      endpoint: http://jaeger:14268/api/traces
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**:
- **Prometheus**: –°—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –º–µ—Ç—Ä–∏–∫ –≤ Kubernetes —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ
- **Jaeger**: –û—Ç–ª–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ distributed tracing
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –•–æ—Ä–æ—à–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Apollo Router

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã**:

#### OpenTelemetry + —Ä–∞–∑–ª–∏—á–Ω—ã–µ backends
```rust
use opentelemetry::{global, sdk::trace::TracerProvider};

let tracer = global::tracer("auto-ru-federation");
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: Vendor-agnostic, –µ–¥–∏–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç
**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**: –ë–æ–ª—å—à–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

#### DataDog APM
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, –æ—Ç–ª–∏—á–Ω—ã–π UX
**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**: –ö–æ–º–º–µ—Ä—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ, vendor lock-in

## 8. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è: Make + Bash scripts

### –ü—Ä–∏–Ω—è—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ: Makefile + Bash scripts

**Makefile —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```makefile
.PHONY: dev build test clean

dev:
	./scripts/dev-setup.sh

build:
	cargo build --release

test:
	cargo test --workspace

clean:
	cargo clean
	docker-compose down -v
```

**dev-setup.sh**:
```bash
#!/bin/bash
set -e

echo "üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ä–µ–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
command -v docker >/dev/null 2>&1 || { echo "Docker –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"; exit 1; }

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up -d postgres redis

# –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
until docker-compose exec postgres pg_isready -U postgres; do
    sleep 1
done
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**:
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –ü–æ–Ω—è—Ç–Ω–æ –ª—é–±–æ–º—É —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É
- **–ü–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å**: –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö Unix —Å–∏—Å—Ç–µ–º–∞—Ö
- **–ì–∏–±–∫–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ –Ω—É–∂–¥—ã

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã**:

#### Task runners (just, cargo-make)
```justfile
# Justfile
dev:
    ./scripts/dev-setup.sh

build:
    cargo build --release

test:
    cargo test --workspace
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –ë–æ–ª–µ–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å, –ª—É—á—à–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –º–µ–Ω—å—à–∞—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω–æ—Å—Ç—å

#### Docker-based automation
```dockerfile
FROM rust:1.75 as dev-tools
RUN cargo install cargo-watch
WORKDIR /app
CMD ["cargo", "watch", "-x", "run"]
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ä–µ–¥–∞, –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å
**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**: –°–ª–æ–∂–Ω–æ—Å—Ç—å –≤ –æ—Ç–ª–∞–¥–∫–µ, –º–µ–¥–ª–µ–Ω–Ω–µ–µ –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## 9. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: Environment variables + YAML

### –ü—Ä–∏–Ω—è—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ: .env —Ñ–∞–π–ª—ã + router.yaml

**.env.example**:
```env
DATABASE_URL=postgresql://postgres:password@localhost:5432/auto_ru_federation
REDIS_URL=redis://localhost:6379
JWT_SECRET=your-secret-key-here
RUST_LOG=info
```

**router.yaml**:
```yaml
supergraph:
  listen: 0.0.0.0:4000
  introspection: true

subgraphs:
  ugc:
    routing_url: http://ugc-subgraph:4001/graphql
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**:
- **12-factor app**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ environment
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –°–µ–∫—Ä–µ—Ç—ã –Ω–µ –≤ –∫–æ–¥–µ
- **–ì–∏–±–∫–æ—Å—Ç—å**: –†–∞–∑–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã**:

#### Configuration files (TOML/JSON)
```toml
[database]
url = "postgresql://postgres:password@localhost:5432/auto_ru_federation"

[redis]
url = "redis://localhost:6379"

[auth]
jwt_secret = "your-secret-key-here"
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å, —Ç–∏–ø–∏–∑–∞—Ü–∏—è
**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**: –°–ª–æ–∂–Ω–µ–µ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–µ–∫—Ä–µ—Ç–∞–º–∏, –Ω–µ —Å–ª–µ–¥—É–µ—Ç 12-factor

#### Kubernetes ConfigMaps + Secrets
```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  DATABASE_URL: "postgresql://postgres:password@postgres:5432/auto_ru_federation"
---
apiVersion: v1
kind: Secret
metadata:
  name: app-secrets
data:
  JWT_SECRET: eW91ci1zZWNyZXQta2V5LWhlcmU=
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: Kubernetes native, –ª—É—á—à–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**: –ü—Ä–∏–≤—è–∑–∫–∞ –∫ Kubernetes, —Å–ª–æ–∂–Ω–æ—Å—Ç—å –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## 10. –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–µ—à–µ–Ω–∏–π

| –ê—Å–ø–µ–∫—Ç | –í—ã–±—Ä–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ | –û—Å–Ω–æ–≤–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞ |
|--------|------------------|---------------------|-------------------|
| **–Ø–∑—ã–∫** | Rust | Node.js | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å + –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å |
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | Cargo Workspace | Polyrepo | –£–ø—Ä–æ—â–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ |
| **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã** | Multi-stage Docker | Single-stage | –†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞ + –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å |
| **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è** | Docker Compose | Kubernetes | –ü—Ä–æ—Å—Ç–æ—Ç–∞ –¥–ª—è dev —Å—Ä–µ–¥—ã |
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** | PostgreSQL | MongoDB | ACID + GraphQL relations |
| **–ö–µ—à** | Redis | In-memory | –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç—å + persistence |
| **–ú–µ—Ç—Ä–∏–∫–∏** | Prometheus | DataDog | Open source + K8s –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |
| **–¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞** | Jaeger | Zipkin | –õ—É—á—à–∞—è Apollo –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |
| **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** | Make + Bash | Just | –ü—Ä–æ—Å—Ç–æ—Ç–∞ + —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω–æ—Å—Ç—å |
| **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** | .env + YAML | TOML files | 12-factor compliance |

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–∏–Ω—è—Ç—ã–µ –≤ Task 1 —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç:

1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: Rust + –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ Docker –æ–±—Ä–∞–∑—ã
2. **–ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**: Cargo Workspace + –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
3. **–ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å**: Prometheus + Jaeger –∏–∑ –∫–æ—Ä–æ–±–∫–∏
4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–∑—ã + –∏–∑–æ–ª—è—Ü–∏—è —Å–µ—Ç–µ–π
5. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ Kubernetes + –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–≠—Ç–∏ —Ä–µ—à–µ–Ω–∏—è —Å–æ–∑–¥–∞—é—Ç –ø—Ä–æ—á–Ω—É—é –æ—Å–Ω–æ–≤—É –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è —Ñ–µ–¥–µ—Ä–∞—Ç–∏–≤–Ω–æ–π GraphQL –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã Auto.ru.