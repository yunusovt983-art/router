# UGC Subgraph Performance Configuration

# Basic service configuration
PORT=4001
DATABASE_URL=postgresql://postgres:password@localhost:5432/ugc_db
JWT_SECRET=your-secret-key
LOG_LEVEL=info

# CORS configuration
CORS_ORIGINS=*

# External services
USERS_SERVICE_URL=http://users-service:4002
OFFERS_SERVICE_URL=http://offers-service:4004

# Redis Cache Configuration
REDIS_URL=redis://localhost:6379
REDIS_ENABLED=true
REDIS_DEFAULT_TTL=300
REDIS_MAX_CONNECTIONS=10
REDIS_CONNECTION_TIMEOUT=5
REDIS_COMMAND_TIMEOUT=3

# Query Limits Configuration
QUERY_MAX_DEPTH=10
QUERY_MAX_COMPLEXITY=1000
QUERY_DEFAULT_FIELD_COMPLEXITY=1
QUERY_ENABLE_INTROSPECTION_LIMITS=false
QUERY_DEFAULT_RATE_LIMIT=60

# Tracing Configuration
JAEGER_ENDPOINT=http://localhost:14268/api/traces
TRACE_SAMPLE_RATE=1.0
ENABLE_CONSOLE_LOGS=true

# Performance Tuning
# Database connection pool settings (handled by sqlx)
DATABASE_MAX_CONNECTIONS=20
DATABASE_MIN_CONNECTIONS=5
DATABASE_ACQUIRE_TIMEOUT=30
DATABASE_IDLE_TIMEOUT=600
DATABASE_MAX_LIFETIME=1800

# Application-specific performance settings
ENABLE_QUERY_BATCHING=true
ENABLE_DATALOADER=true
DATALOADER_MAX_BATCH_SIZE=50
CACHE_WARMUP_ON_STARTUP=true

# Rate limiting per user type (JSON format)
# RATE_LIMITS='{"premium_user":{"max_depth":15,"max_complexity":2000,"rate_limit_per_minute":120},"basic_user":{"max_depth":8,"max_complexity":500,"rate_limit_per_minute":30}}'

# Monitoring and alerting
METRICS_ENABLED=true
HEALTH_CHECK_INTERVAL=30
BUSINESS_METRICS_UPDATE_INTERVAL=60

# Development settings
GRAPHQL_PLAYGROUND_ENABLED=true
INTROSPECTION_ENABLED=true